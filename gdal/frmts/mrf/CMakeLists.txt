
ADD_GDAL_DRIVER(TARGET gdal_MRF SOURCES
                BitMask2D.h
                JPEG_band.cpp PNG_band.cpp LERC_band.cpp marfa.h
                marfa_dataset.cpp mrf_band.cpp mrf_overview.cpp mrf_util.cpp
                Packer.h Packer_RLE.cpp Packer_RLE.h JPNG_band.cpp
                Tif_band.cpp Raw_band.cpp
                BUILTIN)
GDAL_DRIVER_STANDARD_INCLUDES(gdal_MRF)

if(GDAL_JPEG12_SUPPORTED)
    GDAL_TARGET_SOURCES(TARGET gdal_MRF SOURCES JPEG12_band.cpp)
    TARGET_COMPILE_DEFINITIONS(gdal_MRF PRIVATE -DJPEG12_SUPPORTED)
endif()

if(GDAL_USE_LIBJPEG_INTERNAL)
    TARGET_INCLUDE_DIRECTORIES(gdal_MRF PRIVATE $<BUILD_INTERFACE:${GDAL_ROOT_SOURCE_DIR}/frmts/jpeg/libjpeg>)
else()
    TARGET_INCLUDE_DIRECTORIES(gdal_MRF PRIVATE JPEG::JPEG)
    GDAL_TARGET_LINK_LIBRARIES(TARGET gdal_MRF LIBRARIES JPEG::JPEG)
endif()

if(GDAL_USE_LIBPNG_INTERNAL)
    TARGET_INCLUDE_DIRECTORIES(gdal_MRF PRIVATE $<BUILD_INTERFACE:${GDAL_ROOT_SOURCE_DIR}/frmts/png/libpng>)
    TARGET_COMPILE_DEFINITIONS(gdal_MRF PRIVATE -DINTERNAL_PNG)
else()
    TARGET_INCLUDE_DIRECTORIES(gdal_MRF PRIVATE ${PNG_INCLUDE_DIRS})
    GDAL_TARGET_LINK_LIBRARIES(TARGET gdal_MRF LIBRARIES ${PNG_LIBRARIES})
endif()

if(GDAL_USE_LIBZ_INTERNAL)
    TARGET_INCLUDE_DIRECTORIES(gdal_MRF PRIVATE $<BUILD_INTERFACE:${GDAL_ROOT_SOURCE_DIR}/frmts/zlib>)
else()
    TARGET_INCLUDE_DIRECTORIES(gdal_MRF PRIVATE ${ZLIB_INCLUDE_DIRS})
    GDAL_TARGET_LINK_LIBRARIES(TARGET gdal_MRF LIBRARIES ${ZLIB_LIBRARIES})
endif()

if(GDAL_USE_LIBLERC_INTERNAL)
    target_sources(gdal_MRF PRIVATE LERC_band.cpp)
    TARGET_INCLUDE_DIRECTORIES(gdal_MRF PRIVATE
                               $<BUILD_INTERFACE:${GDAL_ROOT_SOURCE_DIR}/frmts/mrf/libLERC>
                               $<BUILD_INTERFACE:${GDAL_ROOT_SOURCE_DIR}/third_party/LercLib>)
    TARGET_COMPILE_DEFINITIONS(gdal_MRF PRIVATE -DLERC)
endif()

